
[{"id":138,"date":"2018-09-10T02:45:01","date_gmt":"2018-09-10T02:45:01","guid":{"rendered":"http:\/\/ploobs.com.br\/?p=138"},"modified":"2018-09-10T02:45:04","modified_gmt":"2018-09-10T02:45:04","slug":"creating-system-spawners-to-populate-level","status":"publish","type":"post","link":"http:\/\/ploobs.com.br\/2018\/09\/10\/creating-system-spawners-to-populate-level\/","title":{"rendered":"Creating System Spawners to populate Level"},"content":{"rendered":"\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F09%2F10%2Fcreating-system-spawners-to-populate-level%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n<p>While building the level of the game Plant Jumper i\u00b4ve been building, at first i decided to build an amount of items and then add another row of blocks, removing the very old ones.<br\/>This approach after a bunch of hours trying to understand how to create a simple and optimized solution led me to learn a little bit of the ECS way of think.<br\/>The first thing i decided to do it is to create a system able to create and remove itens in a coherent way, doing it every time the same way<\/p>\n\n<p>I started deciding that the Level must be an entity because it will\u00a0 deal with informations about the quality of the level and how many rows we already created.<\/p>\n\n<pre class=\"wp-block-code\"><code>public struct LevelState : IComponentData\n{\n    public float currentRow;\n    public float higherRow;\n\n    public float isDirty;\n}<\/code><\/pre>\n\n<p>This component will be responsible to create the level from the scratch<\/p>\n\n<p>In the Bootstrap, creates a entity with that component and set the currentRow = 0, hightRow wich defines the size of items we will pre create and isDirty that will be explained further<\/p>\n\n<pre class=\"wp-block-code\"><code>SetComponentData(level, new LevelState\n        {\n            currentRow = 0,\n            higherRow = constants.maxRows,\n            isDirty = 0\n        });<\/code><\/pre>\n\n<h4>Remove old items system<\/h4>\n\n<pre class=\"wp-block-code\"><code>\nusing UnityEngine;\nusing Unity.Entities;\nusing Unity.Transforms;\nusing Unity.Collections;\n\nusing Unity.Rendering;\n\nusing System.Collections;\nusing System.Collections.Generic;\nusing Unity.Jobs;\n\nusing Unity.Mathematics;\n\npublic class UpdateLevelSystem : ComponentSystem\n{\n    public struct PlayerData\n    {\n        public readonly int Length;\n        [ReadOnly] public ComponentDataArray&lt;Player> Player;\n        [ReadOnly] public ComponentDataArray&lt;Position> Position;\n    }\n\n    [Inject] private PlayerData m_PlayerData;\n\n    public struct ItemData\n    {\n        public readonly int Length;\n        public EntityArray Entities;\n        public ComponentDataArray&lt;Item> Item;\n        public ComponentDataArray&lt;Position> Position;\n    }\n    [Inject] private ItemData m_ItemData;\n\n    public struct LevelData\n    {\n        public readonly int Length;\n        public ComponentDataArray&lt;LevelState> LevelState;\n    }\n\n    [Inject] private LevelData m_LevelData;\n\n    protected override void OnUpdate()\n    {\n        for (int index = 0; index &lt; m_ItemData.Length; ++index)\n        {\n            if (m_PlayerData.Position[0].Value.y - m_ItemData.Position[index].Value.y > 50)\n            {\n                PostUpdateCommands.DestroyEntity(m_ItemData.Entities[index]);\n\n                LevelState state = m_LevelData.LevelState[0];\n\n                if (state.isDirty == 0 &amp;&amp; state.currentRow > 0)\n                {\n                    m_LevelData.LevelState[0] = new LevelState\n                    {\n                        currentRow = state.currentRow - 1,\n                        isDirty = 1,\n                        higherRow = state.higherRow\n                    };\n                }\n            }\n        }\n    }\n}\n<\/code><\/pre>\n\n<p>This system do two things<\/p>\n\n<ul><li>Removes the items with a distance greater than an amount, here defined as 50<\/li><li>Set the level component once per row as dirty and set the new currentrow. The is dirty is here to avoid the changing every block removed once it is in the same row as the previous one.<\/li><\/ul>\n\n<h4>Add new items system<\/h4>\n\n<p>As we defined the maximun rows we want, it is easy to create a system that mantain this amount of rows existing and if anything removes a row, creates a new one<\/p>\n\n<pre class=\"wp-block-code\"><code>\nusing UnityEngine;\nusing Unity.Entities;\nusing Unity.Transforms;\nusing Unity.Collections;\n\nusing Unity.Rendering;\n\nusing System.Collections;\nusing System.Collections.Generic;\nusing Unity.Jobs;\n\nusing Unity.Mathematics;\n\npublic class SpawnItemsSystem : ComponentSystem\n{\n    public struct LevelData\n    {\n        public readonly int Length;\n        public ComponentDataArray&lt;LevelState> LevelState;\n    }\n\n    [Inject] private LevelData m_LevelData;\n\n    private void SetItemBaseComponent(LevelGenerator.Item item)\n    {\n        PostUpdateCommands.SetComponent(new Position { Value = item.position });\n        PostUpdateCommands.SetComponent(default(Item));\n    }\n\n    private void createBlock()\n    {\n        string entityName = \"block\";\n\n        PostUpdateCommands.CreateEntity(ArchetypeFactory.Instance.getArchetypeByName(entityName));\n\n        MeshInstanceRenderer renderer = EntityLookFactory.Instance.getLook(entityName);\n        PostUpdateCommands.SetComponent(EntityFactory.getColliderInfo(renderer));\n        PostUpdateCommands.SetSharedComponent(renderer);\n    }\n    private void createBreakeable()\n    {\n        GameObject GameConstantsObject = GameObject.Find(\"GameConstants\");\n        GameConstants _constants = GameConstantsObject.GetComponent&lt;GameConstants>();\n\n        string entityName = \"breakeable\";\n        PostUpdateCommands.CreateEntity(ArchetypeFactory.Instance.getArchetypeByName(entityName));\n\n        PostUpdateCommands.SetComponent(new BreakComponent\n        {\n            coolDown = _constants.breakTimeInSeconds,\n            started = 0\n        });\n\n        MeshInstanceRenderer renderer = EntityLookFactory.Instance.getLook(entityName);\n        PostUpdateCommands.SetComponent(EntityFactory.getColliderInfo(renderer));\n        PostUpdateCommands.SetSharedComponent(renderer);\n    }\n\n    private void createZigZag()\n    {\n        GameObject GameConstantsObject = GameObject.Find(\"GameConstants\");\n        GameConstants _constants = GameConstantsObject.GetComponent&lt;GameConstants>();\n\n        string entityName = \"zigzag\";\n\n        PostUpdateCommands.CreateEntity(ArchetypeFactory.Instance.getArchetypeByName(entityName));\n\n        PostUpdateCommands.SetComponent(new ZigZagMoveable\n        {\n            Amplitude = _constants.MoveableBlockAmplitude * _constants.blockSize,\n            Speed = _constants.MoveableBlockSpeed,\n            CurrentPosition = 0,\n            Direction = 1\n        });\n\n        MeshInstanceRenderer renderer = EntityLookFactory.Instance.getLook(entityName);\n        PostUpdateCommands.SetComponent(EntityFactory.getColliderInfo(renderer));\n        PostUpdateCommands.SetSharedComponent(renderer);\n    }\n\n\n    private void createEntity(LevelGenerator.Item item)\n    {\n        switch (item.itemProperty.entityName)\n        {\n            case \"block\":\n                createBlock();\n                break;\n            case \"breakeable\":\n                createBreakeable();\n                break;\n            case \"zigzag\":\n                createZigZag();\n                break;\n            default:\n                createBlock();\n                break;\n        }\n\n        SetItemBaseComponent(item);\n    }\n\n\n    protected override void OnUpdate()\n    {\n        LevelState state = m_LevelData.LevelState[0];\n\n        if (state.currentRow &lt; state.higherRow)\n        {\n            List&lt;LevelGenerator.Item> items = LevelGenerator.Instance.buildValidRow();\n            foreach (var item in items)\n            {\n                createEntity(item);\n            }\n\n            m_LevelData.LevelState[0] = new LevelState\n            {\n                currentRow = state.currentRow + 1,\n                isDirty = 0,\n                higherRow = state.higherRow\n            };\n        }\n    }\n}\n<\/code><\/pre>\n\n<p>This code here contains creators to every type o items in the game. I don\u00b4t think this is the best solution because i\u00b4ve already created the EntityFactory and i am here creating again the methods. I did it this way because we have two different interfaces to createentities and add components.<br\/>Once we are at the creation time, the ECS uses the entityManager, but as we started runing the systems we cannot access it anymore, and in the runtime moment we have to use the PostUpdateCommands which has not the same inheritance of the entityManager, and so i cannot declare in my factory the interface.<br\/>I will think in a better solution for that further<\/p>\n\n<p><\/p>\n\n<p><\/p>\n\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F09%2F10%2Fcreating-system-spawners-to-populate-level%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n","protected":false},"excerpt":{"rendered":"<p>While building the level of the game Plant Jumper i\u00b4ve been building, at first i decided to build an amount<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[8,9,7],"_links":{"self":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/138"}],"collection":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/comments?post=138"}],"version-history":[{"count":2,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/138\/revisions"}],"predecessor-version":[{"id":140,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/138\/revisions\/140"}],"wp:attachment":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media?parent=138"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/categories?post=138"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/tags?post=138"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}},{"id":104,"date":"2018-09-05T17:41:46","date_gmt":"2018-09-05T17:41:46","guid":{"rendered":"http:\/\/ploobs.com.br\/?p=104"},"modified":"2018-09-05T21:12:15","modified_gmt":"2018-09-05T21:12:15","slug":"plant-jumper-creating-a-breakeble-and-moveable-block","status":"publish","type":"post","link":"http:\/\/ploobs.com.br\/2018\/09\/05\/plant-jumper-creating-a-breakeble-and-moveable-block\/","title":{"rendered":"Plant Jumper &#8211; Creating a breakeble and a moveable Block"},"content":{"rendered":"\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F09%2F05%2Fplant-jumper-creating-a-breakeble-and-moveable-block%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n<p>At the start i planned to implement two types of blocks.<\/p>\n\n<ul>\n<li>Breaekable: This block once hitted by a collision starts a timer and then fade away<\/li>\n<li>Moveable: This block moves in a zigzag around a starting point<\/li>\n<\/ul>\n\n<h2>Components Modeling<\/h2>\n\n<p>The first part when creating a new behavior in a ECS mindset it is to try to break it in components, wich will store the behavior data.<\/p>\n\n<h4>Breakeable Block<\/h4>\n\n<p>This block has 3 states, not touched, counting and dead. For that i created a component with two informations. The breaking cooldown and if the breaking started;<\/p>\n\n<pre class=\"wp-block-preformatted\">public struct BreakComponent : IComponentData\n{\n    public float coolDown;\n    public float started;\n}<\/pre>\n\n<h4>ZigZag Block<\/h4>\n\n<p>This block will move to the right and then to the left along a initial point a until a determined amplitude.<\/p>\n\n<pre class=\"wp-block-preformatted\">public struct ZigZagMoveable : IComponentData<br\/>{<br\/>    public float Amplitude;<br\/>    public float CurrentPosition;<br\/>    public float Speed;<br\/>    public float Direction;<br\/>}\n<\/pre>\n\n<p>The amplitude determines how far will the block moves from the initial Position<br\/>The CurrentPosition stores the relative moviment of the block<br\/>The Speed, how fast will the block moves<br\/>The Direction, if the block moves right or left.<\/p>\n\n<h2>Entity Modeling<\/h2>\n\n<p>The Entities are pretty much blocks with an additional behavior, so the entity archetype will seams to be the block one<\/p>\n\n<pre class=\"wp-block-code\"><code>var brackeableArchetype = this._entityManager.CreateArchetype(\n            typeof(Position),\n            typeof(Block),\n            typeof(BreakComponent),\n            typeof(AABBComponent),\n            typeof(Collider),\n            typeof(CollisionComponent),\n            typeof(MeshInstanceRenderer)\n        );<\/code><\/pre>\n\n<pre class=\"wp-block-code\"><code>var zigzagArchetype = this._entityManager.CreateArchetype(\n            typeof(Position),\n            typeof(Block),\n            typeof(ZigZagMoveable),\n            typeof(AABBComponent),\n            typeof(Collider),\n            typeof(CollisionComponent),\n            typeof(MeshInstanceRenderer)\n        );<\/code><\/pre>\n\n<h2>Systems Modeling<\/h2>\n\n<h4>BreakItemSystem <\/h4>\n\n<p>For the first one, the breakeable i created a simple idea of a state machine, actually just the idea<\/p>\n\n<pre class=\"wp-block-code\"><code>using UnityEngine;\nusing Unity.Entities;\nusing Unity.Transforms;\n\nusing Unity.Mathematics;\n\npublic class BreakeItemSystem : ComponentSystem\n{\n    public struct Data\n    {\n        public readonly int Length;\n        public ComponentDataArray&lt;CollisionComponent> Collision;\n        public EntityArray Entities;\n\n        public ComponentDataArray&lt;BreakComponent> BreakComponent;\n\n    }\n\n    [Inject] private Data m_Data;\n\n    protected override void OnUpdate()\n    {\n        float dt = Time.deltaTime;\n        for (int index = 0; index &lt; m_Data.Length; ++index)\n        {\n            BreakComponent breakComponent = m_Data.BreakComponent[index];\n            if (breakComponent.started == 0)\n            {\n                if (m_Data.Collision[index].direction.y > 0)\n                {\n\n                    m_Data.BreakComponent[index] = new BreakComponent\n                    {\n                        started = 1,\n                        coolDown = breakComponent.coolDown\n                    };\n                }\n            }\n            else\n            {\n                float coolDown = m_Data.BreakComponent[index].coolDown;\n                coolDown -= dt;\n                if (coolDown &lt;= 0.0f)\n                {\n                    PostUpdateCommands.DestroyEntity(m_Data.Entities[index]);\n                }\n                else\n                {\n                    m_Data.BreakComponent[index] = new BreakComponent\n                    {\n                        started = 1,\n                        coolDown = coolDown\n                    };\n                }\n            }\n        }\n    }\n}<\/code><\/pre>\n\n<p>In the update method i check if there is a valid collision in the object, if it is true i started the break timer and in the next cicle will be started and untill the time it is not equals to zero, we decrease its amount, otherwise kill the block.<\/p>\n\n<h4>ZigZag System<\/h4>\n\n<p>In this system i check if the relative position are bigger or smaller than the Amplitude, if so, the direction is changed\u00a0<\/p>\n\n<pre class=\"wp-block-code\"><code>\nusing UnityEngine;\nusing Unity.Entities;\nusing Unity.Transforms;\nusing Unity.Collections;\nusing Unity.Jobs;\n\nusing Unity.Mathematics;\n\npublic class ZigZagSystem : ComponentSystem\n{\n    public struct Data\n    {\n        public readonly int Length;\n        public ComponentDataArray&lt;ZigZagMoveable> ZigZagMoveable;\n        public ComponentDataArray&lt;Position> Position;\n    }\n\n    [Inject] private Data m_Data;\n\n    protected override void OnUpdate()\n    {\n        float dt = Time.deltaTime;\n\n        for (int index = 0; index &lt; m_Data.Length; ++index)\n        {\n            ZigZagMoveable zigzag = m_Data.ZigZagMoveable[index];\n\n            float speed = 0;\n\n            if (zigzag.CurrentPosition >= zigzag.Amplitude)\n            {\n                zigzag.Direction = -1;\n            }\n            else if (zigzag.CurrentPosition &lt;= -zigzag.Amplitude)\n            {\n                zigzag.Direction = 1;\n            }\n            speed = zigzag.Direction * zigzag.Speed;\n\n            float3 currentPosition = m_Data.Position[index].Value;\n            float deltaPosition = dt * speed;\n            float newPosition = currentPosition.x + deltaPosition;\n\n            m_Data.ZigZagMoveable[index] = new ZigZagMoveable\n            {\n                Amplitude = zigzag.Amplitude,\n                CurrentPosition = zigzag.CurrentPosition + deltaPosition,\n                Speed = zigzag.Speed,\n                Direction = zigzag.Direction\n            };\n\n            m_Data.Position[index] = new Position\n            {\n                Value = new float3(newPosition, currentPosition.y, currentPosition.z)\n            };\n        }\n\n\n    }\n\n}<\/code><\/pre>\n\n<p>As you can noticed i didn\u00b4t need to think about its collision, because it is also a block and contains colliders, so the other systems will treat it well. This is the beauty of ECS, you just need to append behaviors and see the magic happening<\/p>\n\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F09%2F05%2Fplant-jumper-creating-a-breakeble-and-moveable-block%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n","protected":false},"excerpt":{"rendered":"<p>At the start i planned to implement two types of blocks. Breaekable: This block once hitted by a collision starts<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[5,8,7],"_links":{"self":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/104"}],"collection":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/comments?post=104"}],"version-history":[{"count":15,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/104\/revisions"}],"predecessor-version":[{"id":135,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/104\/revisions\/135"}],"wp:attachment":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media?parent=104"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/categories?post=104"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/tags?post=104"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}},{"id":100,"date":"2018-09-04T16:28:25","date_gmt":"2018-09-04T16:28:25","guid":{"rendered":"http:\/\/ploobs.com.br\/?p=100"},"modified":"2018-09-10T20:34:37","modified_gmt":"2018-09-10T20:34:37","slug":"plant-jumper-procedural-level-generation","status":"publish","type":"post","link":"http:\/\/ploobs.com.br\/2018\/09\/04\/plant-jumper-procedural-level-generation\/","title":{"rendered":"Plant Jumper &#8211; Procedural Level Generation"},"content":{"rendered":"\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F09%2F04%2Fplant-jumper-procedural-level-generation%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n<p>Building a game it is not just create some mechanics and a beauty graphic, it is overall and experience and for that the player expects to be amazed with the universe you created and therefore there must have a good amount of content.<\/p>\n\n<p>In a lot of games, levels, and players and everything else are handcrafted but this approach it is not scalable if you want for example to create a endless level game, in this cases we use to create procedural levels.<\/p>\n\n<h3>Understanding the level<\/h3>\n\n<p>The first thing you need to know when creating procedural levels it is the pieces you will tie together, how will they behave and how will the player interact with it. For example, if you are creating platforms, as i am, you need to be sure the player can reach the platforms.<\/p>\n\n<p>The creation of a level i considered two ways.<\/p>\n\n<ul><li>Create a Maker and a Validator: This two steps approach it is a more robust but in the other hand harder to implement. In the Maker phase, you have to generate a level and in the Validator use the possible player actions to validate it<\/li><li>Create a Maker and Validate yourself. In this approach you have to create the level as in the previous approach, but there will be no valiration phase, which means that the level have to be well formed or you will have to look to it and validate. In this approach you have to have a way to make sure the moviment will be feasible.<\/li><\/ul>\n\n<p>In my case, i will use the second one at the beginning<\/p>\n\n<h3>PseudoCode of generator<\/h3>\n\n<p>In the plant jumper, the levels will formed of different kind of blocks and enemies, probabily i will add differente types while developing the game but there is a core behavior i want then to follow.<\/p>\n\n<p>At this moment i want to be able to control:<\/p>\n\n<ul><li>how many items will be in each height of the level;<\/li><li>The height space between a new group of items;<\/li><li>The amount of items each block will contain. For example a group of 2 normal blocks together or 3 normal blocks together;<\/li><li>The minX and maxX<\/li><li>The minY and maxY<\/li><\/ul>\n\n<pre class=\"wp-block-code\"><code>public List&lt;float3> buildBlocks()\n    {\n        List&lt;float3> blocks = new List&lt;float3>();\n\n        int currentY = minY;\n\n        while (currentY &lt; maxY)\n        {\n            int distance = UnityEngine.Random.Range(2, this.maxDistanceBetweenRows);\n            currentY += (distance * size);\n\n            int currentX = minX;\n\n            int blocksPlaced = 0;\n\n            while (currentX &lt; maxX &amp;&amp; blocksPlaced &lt; this.maxItemsByColumn)\n            {\n                bool canInsertBlock = (UnityEngine.Random.Range(0, 10.0f) > 5) &amp;&amp; (currentX + blockSize * size &lt; maxX);\n                if (canInsertBlock)\n                {\n                    for (int i = 0; i &lt; blockSize; i++)\n                    {\n                        float3 blockPosition = new float3(currentX, currentY, 0);\n                        blocks.Add(blockPosition);\n                        blocksPlaced++;\n                        currentX += size;\n                    }\n                }\n                currentX += size;\n            }\n\n        }\n        return blocks;\n    }<\/code><\/pre>\n\n<h2>Next steps<\/h2>\n\n<p>In this level editor i want to be able to create a group of items and set the dificulty. For that in another post i will discuss about how i decided what it is a easy and a hard level<\/p>\n\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F09%2F04%2Fplant-jumper-procedural-level-generation%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n","protected":false},"excerpt":{"rendered":"<p>Building a game it is not just create some mechanics and a beauty graphic, it is overall and experience and<\/p>\n","protected":false},"author":1,"featured_media":141,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[8,9,7],"_links":{"self":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/100"}],"collection":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/comments?post=100"}],"version-history":[{"count":3,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/100\/revisions"}],"predecessor-version":[{"id":113,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/100\/revisions\/113"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media\/141"}],"wp:attachment":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media?parent=100"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/categories?post=100"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/tags?post=100"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}},{"id":98,"date":"2018-08-30T22:54:53","date_gmt":"2018-08-30T22:54:53","guid":{"rendered":"http:\/\/ploobs.com.br\/?p=98"},"modified":"2018-08-31T01:58:05","modified_gmt":"2018-08-31T01:58:05","slug":"plantjumper-input-system","status":"publish","type":"post","link":"http:\/\/ploobs.com.br\/2018\/08\/30\/plantjumper-input-system\/","title":{"rendered":"PlantJumper &#8211; Input System"},"content":{"rendered":"\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F30%2Fplantjumper-input-system%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n<p>Control the user input can be designed in several ways. I decided to use the accelerometer<\/p>\n\n<p>In a very simple approach and trying to keep classes decoupled. The PlayerInput only changes the Component PlayerInput<\/p>\n\n<pre class=\"wp-block-code\"><code>using Unity.Entities;\nusing UnityEngine;\n\npublic class PlayerInputSystem : ComponentSystem\n{\n    struct PlayerData\n    {\n        public readonly int Length;\n        public ComponentDataArray&lt;PlayerInput> PlayerInput;\n    }\n\n    [Inject] private PlayerData m_Data;\n\n    protected override void OnUpdate()\n    {\n        float dt = Time.deltaTime;\n\n        for (int i = 0; i &lt; m_Data.Length; ++i)\n        {\n            UpdatePlayerInput(i, dt);\n        }\n    }\n\n    private void UpdatePlayerInput(int i, float dt)\n    {\n        float dirX = Input.acceleration.x;\n\n        float xDirection = dirX > 0 ? 1 : -1;\n\n        m_Data.PlayerInput[i] = new PlayerInput\n        {\n            Direction = xDirection\n        };\n    }\n}<\/code><\/pre>\n\n<pre class=\"wp-block-code\"><code>public struct PlayerInput : IComponentData\n{\n    public float Direction;\n}<\/code><\/pre>\n\n<h4>Changing Player direction<\/h4>\n\n<p>Using the direction change information we can now rotate the player so it will face the direction we set using the accelerometer<\/p>\n\n<pre class=\"wp-block-code\"><code>\nusing UnityEngine;\nusing Unity.Entities;\nusing Unity.Transforms;\nusing Unity.Mathematics;\n\npublic class ChangeDirectionSystem : ComponentSystem\n{\n    public struct Data\n    {\n        public readonly int Length;\n        public ComponentDataArray&lt;Player> Player;\n        public ComponentDataArray&lt;Rotation> Rotation;\n        public ComponentDataArray&lt;Velocity> Velocity;\n        public ComponentDataArray&lt;PlayerInput> PlayerInput;\n    }\n\n    [Inject] private Data m_Data;\n\n    protected override void OnUpdate()\n    {\n        for (int index = 0; index &lt; m_Data.Length; ++index)\n        {\n            float directionX = m_Data.PlayerInput[index].Direction;\n\n            Velocity currentVelocity = m_Data.Velocity[index];\n\n            m_Data.Velocity[index] = new Velocity\n            {\n                Value = currentVelocity.Value + 0.5f * (new float3(directionX, 0, 0))\n            };\n\n            Vector3 rotationDirection = new Vector3(0, 0, -directionX);\n            m_Data.Rotation[index] = new Rotation\n            {\n                Value = Quaternion.LookRotation(rotationDirection, Vector3.up)\n            };\n        }\n    }\n}<\/code><\/pre>\n\n<p>A thing i noticed implementing this it is that the x velocity will be set in this system and not in the jump system.<\/p>\n\n<p>Well, this was a very short post but behind the decision of use the accelerometer are some tests i&#8217;ve made using touch, wich i didn\u00b4t use because the touch will be used to other player moviments, as shots for example<\/p>\n\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F30%2Fplantjumper-input-system%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n","protected":false},"excerpt":{"rendered":"<p>Control the user input can be designed in several ways. I decided to use the accelerometer In a very simple<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/98"}],"collection":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/comments?post=98"}],"version-history":[{"count":1,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/98\/revisions"}],"predecessor-version":[{"id":99,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/98\/revisions\/99"}],"wp:attachment":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media?parent=98"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/categories?post=98"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/tags?post=98"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}},{"id":30,"date":"2018-08-28T12:00:38","date_gmt":"2018-08-28T12:00:38","guid":{"rendered":"http:\/\/ploobs.com.br\/?p=30"},"modified":"2018-08-28T21:20:29","modified_gmt":"2018-08-28T21:20:29","slug":"plant-jumper-player-moviment","status":"publish","type":"post","link":"http:\/\/ploobs.com.br\/2018\/08\/28\/plant-jumper-player-moviment\/","title":{"rendered":"Plant Jumper &#8211; Player Moviment"},"content":{"rendered":"\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F28%2Fplant-jumper-player-moviment%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n<p>The player moviment using ECS as another systems must be designed to be data driven.<\/p>\n\n<p>At the beginning our player will jump and change direction. So we need the following components<\/p>\n\n<p>Position &#8211; will describe its position<br\/>Heading2D &#8211; will describe if it is pointing right ou left<br\/>Velocity &#8211; will describe the jump and fall moviment<\/p>\n\n<h4>Auto Jump System<\/h4>\n\n<p>In the jumpter game, the player is always jumping, so i created an auto jump system<\/p>\n\n<pre class=\"wp-block-code\"><code>\nusing UnityEngine;\nusing Unity.Entities;\nusing Unity.Transforms;\nusing Unity.Collections;\n\nusing Unity.Mathematics;\n\n\n[UpdateAfter(typeof(ComputeColliderAABBSystem))]\npublic class AutoJumpSystem : ComponentSystem\n{\n    public struct Data\n    {\n        public readonly int Length;\n        public ComponentDataArray&lt;Heading> Heading;\n        public ComponentDataArray&lt;Player> Player;\n\n        public ComponentDataArray&lt;Velocity> Velocity;\n\n        public ComponentDataArray&lt;CollisionComponent> CollisionComponent;\n\n    }\n\n    [Inject] private Data m_Data;\n\n    public AutoJumpSystem()\n    {\n    }\n\n    private float amountY = 20;\n    private float amountX = 5;\n    protected override void OnUpdate()\n    {\n        for (int index = 0; index &lt; m_Data.Length; ++index)\n        {\n            if (m_Data.CollisionComponent[index].Value > 0)\n            {\n                float3 velocity = new float3(0, amountY, 0);\n                velocity += (amountX * m_Data.Heading[index].Value);\n\n                m_Data.Velocity[index] = new Velocity { Value = velocity };\n            }\n        }\n    }\n}<\/code><\/pre>\n\n<p>As you can noticed we are not changing position, just the velocity data. This is due to the RigidBody system been already treating velocity changes, but for that i have to make a little change in the rigidbody system<\/p>\n\n<pre class=\"wp-block-code\"><code>protected override void OnUpdate()\n    {\n        float dt = Time.deltaTime;\n        for (int index = 0; index &lt; m_Data.Length; ++index)\n        {\n            float3 gravity = new float3(0, -20, 0);\n\n            var position = m_Data.Position[index].Value;\n            if (m_Data.Collision[index].Value > 0)\n            {\n                gravity = float3.zero;\n            }\n\n            Velocity velocity = new Velocity\n            {\n                Value = m_Data.Velocity[index].Value + gravity * dt\n            };\n            m_Data.Velocity[index] = velocity;\n\n            position += (m_Data.Velocity[index].Value * dt + 0.5f * gravity * dt * dt);\n\n            m_Data.Position[index] = new Position { Value = position };\n        }\n    }<\/code><\/pre>\n\n<p>The method onUpdate now will apply the velocity every cicle and if there is a collision, not apply gravity. I know this is a very simple aproximation but for this game, it is enough.<\/p>\n\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F28%2Fplant-jumper-player-moviment%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n","protected":false},"excerpt":{"rendered":"<p>The player moviment using ECS as another systems must be designed to be data driven. At the beginning our player<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[4,3],"tags":[5,8,7],"_links":{"self":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/30"}],"collection":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/comments?post=30"}],"version-history":[{"count":4,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/30\/revisions"}],"predecessor-version":[{"id":97,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/30\/revisions\/97"}],"wp:attachment":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media?parent=30"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/categories?post=30"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/tags?post=30"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}},{"id":86,"date":"2018-08-27T11:11:52","date_gmt":"2018-08-27T11:11:52","guid":{"rendered":"http:\/\/ploobs.com.br\/?p=86"},"modified":"2018-08-27T14:14:29","modified_gmt":"2018-08-27T14:14:29","slug":"physics-on-unity-pure-ecs","status":"publish","type":"post","link":"http:\/\/ploobs.com.br\/2018\/08\/27\/physics-on-unity-pure-ecs\/","title":{"rendered":"Physics on Unity Pure ECS"},"content":{"rendered":"\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F27%2Fphysics-on-unity-pure-ecs%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n<p>If you don\u00b4t know, there is no implementation of a physics collision treatment if you are implementing pure ECS at this moment.<br\/>But what can we do is create our own collision detection and each kind of physics treatment we need.<\/p>\n\n<h2><strong>Gravity System<\/strong><\/h2>\n\n<p>For my platform game i need to create an implementation for gravity. A good point of that approach it is that we can create different ways of understand gravity as Mario Galaxy for example.<\/p>\n\n<p>Im my case i implemented a very simple one<\/p>\n\n<pre class=\"wp-block-code\"><code>\nusing UnityEngine;\nusing Unity.Entities;\nusing Unity.Transforms;\n\nusing Unity.Mathematics;\n\npublic class RidigBodySystem : ComponentSystem\n{\n    public struct Data\n    {\n        public readonly int Length;\n        public ComponentDataArray&lt;Position> Position;\n        public ComponentDataArray&lt;CollisionComponent> Collision;\n        public ComponentDataArray&lt;RigidBodyComponent> RigidBody;\n\n        public ComponentDataArray&lt;Velocity> Velocity;\n    }\n\n    [Inject] private Data m_Data;\n\n    protected override void OnUpdate()\n    {\n        float3 gravity = new float3(0, -20, 0);\n        float dt = Time.deltaTime;\n        for (int index = 0; index &lt; m_Data.Length; ++index)\n        {\n            var position = m_Data.Position[index].Value;\n\n            if (m_Data.Collision[index].Value == 0)\n            {\n                Velocity velocity = new Velocity\n                {\n                    Value = m_Data.Velocity[index].Value + gravity * dt\n                };\n                m_Data.Velocity[index] = velocity;\n\n                position += (m_Data.Velocity[index].Value * dt + 0.5f * gravity * dt * dt);\n            }\n\n            m_Data.Position[index] = new Position { Value = position };\n        }\n    }\n}\n<\/code><\/pre>\n\n<p>In this code there is a important concept, the injection<\/p>\n\n<pre class=\"wp-block-code\"><code>public struct Data\n    {\n        public readonly int Length;\n        public ComponentDataArray&lt;Position> Position;\n        public ComponentDataArray&lt;RigidBodyComponent> RigidBody;\n    }\n\n    [Inject] private Data m_Data;<\/code><\/pre>\n\n<p>Unity, has its dependencies injection that based on the struct we create, give us the data of all entities that cointains this components. The beauty of ECS it is that we don\u00b4t know which entity we are changing, actualy, that is the main concept, we don\u00b4t need to know. The systems must be created thinking in the data. So we design systems that changes data and not managers that change objects as we as used to.<\/p>\n\n<p>In this example, only the entities that contains the components Position and RigidBody will have its data changed.<\/p>\n\n<p>The component created for that contains only the mass information and can be used to\u00a0 identify that the entity falls and in the future create collisions and momentun<\/p>\n\n<pre class=\"wp-block-code\"><code>public struct RigidBodyComponent : IComponentData\n{\n    public float Mass;\n}<\/code><\/pre>\n\n<h2>Collision detection<\/h2>\n\n<p>I will initially create just a\u00a0broadphase physics detection, using a simple AABB<\/p>\n\n<h4><strong>Computing AABB<\/strong><\/h4>\n\n<p>First of all we calculate the AABB of every entities that contains the component AABB<\/p>\n\n<pre class=\"wp-block-code\"><code>public struct AABBComponent : IComponentData\n{\n    public float3 center;\n    public float3 halfwidths;\n}<\/code><\/pre>\n\n<pre class=\"wp-block-code\"><code>\nusing UnityEngine;\nusing Unity.Entities;\nusing Unity.Transforms;\n\nusing Unity.Mathematics;\n\n\npublic class ComputeColliderAABBSystem : ComponentSystem\n{\n    public struct Data\n    {\n        public readonly int Length;\n        public ComponentDataArray&lt;Position> Position;\n        public ComponentDataArray&lt;AABBComponent> AABB;\n    }\n\n    [Inject] private Data m_Data;\n\n    protected override void OnUpdate()\n    {\n        for (int index = 0; index &lt; m_Data.Length; ++index)\n        {\n            var position = m_Data.Position[index].Value;\n            float size = 2.5f;\n\n            AABBComponent aabb = new AABBComponent\n            {\n                center = position,\n                halfwidths = new float3(size, size, size)\n            };\n            m_Data.AABB[index] = aabb;\n        }\n    }\n}\n<\/code><\/pre>\n\n<p>The size it is still hardcoded. This values will be tunned further<\/p>\n\n<h4>Calculating broad collision<\/h4>\n\n<p>For a while the collision component it is very simple<\/p>\n\n<pre class=\"wp-block-code\"><code>public struct CollisionComponent : IComponentData\n{\n    public float Value;\n}<\/code><\/pre>\n\n<p>For every entity that contains collision and AABB component we must compare to check if a collision occurred<\/p>\n\n<pre class=\"wp-block-code\"><code>private bool checkAABB(AABBComponent a, AABBComponent b)\n    {\n        bool x = Mathf.Abs(a.center[0] - b.center[0]) &lt;= (a.halfwidths[0] + b.halfwidths[0]);\n        bool y = Mathf.Abs(a.center[1] - b.center[1]) &lt;= (a.halfwidths[1] + b.halfwidths[1]);\n        bool z = Mathf.Abs(a.center[2] - b.center[2]) &lt;= (a.halfwidths[2] + b.halfwidths[2]);\n\n        return x &amp;&amp; y &amp;&amp; z;\n    }<\/code><\/pre>\n\n<p>The update method of the system it is a simple comparison<\/p>\n\n<pre class=\"wp-block-code\"><code>protected override void OnUpdate()\n    {\n        for (int index = 0; index &lt; m_Data.Length; ++index)\n        {\n            m_Data.Collision[index] = new CollisionComponent\n            {\n                Value = 0\n            };\n            for (int id = 0; id &lt; m_Data.Length; ++id)\n            {\n                if (index == id)\n                    continue;\n\n                if (checkAABB(m_Data.AABB[index], m_Data.AABB[id]))\n                {\n                    m_Data.Collision[index] = new CollisionComponent\n                    {\n                        Value = 1\n                    };\n                }\n            }\n        }\n    }<\/code><\/pre>\n\n<h4>Applying collision<\/h4>\n\n<p>The only collision we will check for a while it is of players with blocks while the player falls, then the gravity check must have a little changes\u00a0<\/p>\n\n<p>We added a anotation in the class<\/p>\n\n<pre class=\"wp-block-code\"><code>[UpdateAfter(typeof(BroadphaseSystem))]<\/code><\/pre>\n\n<p>Telling the ECS system to run after the collisions were checked in the broadphasesystem.<\/p>\n\n<p>Another change is in the update method<\/p>\n\n<pre class=\"wp-block-code\"><code>protected override void OnUpdate()\n    {\n        float3 gravity = new float3(0, -20, 0);\n        float dt = Time.deltaTime;\n        for (int index = 0; index &lt; m_Data.Length; ++index)\n        {\n            var position = m_Data.Position[index].Value;\n\n            if (m_Data.Collision[index].Value == 0)\n            {\n                Velocity velocity = new Velocity\n                {\n                    Value = m_Data.Velocity[index].Value + gravity * dt\n                };\n                m_Data.Velocity[index] = velocity;\n\n                position += (m_Data.Velocity[index].Value * dt + 0.5f * gravity * dt * dt);\n            }\n\n            m_Data.Position[index] = new Position { Value = position };\n        }\n    }<\/code><\/pre>\n\n<p>As you can notice there is a comparison<\/p>\n\n<pre class=\"wp-block-code\"><code>if (m_Data.Collision[index].Value == 0)<\/code><\/pre>\n\n<p>To check if the entity was hitted by a collision.<\/p>\n\n<p>This is a very simple approach of a collision. In future tutorials i will treat it better<\/p>\n\n<h2>References<\/h2>\n\n<ul><li>https:\/\/forum.unity.com\/threads\/physics-in-pure-ecs.531716\/<\/li><li>https:\/\/medium.com\/@tomasz.piowczyk\/https-medium-com-tomasz-piowczyk-part-1-unity-ecs-briefly-about-ecs-c077f90efc9a<\/li><\/ul>\n\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F27%2Fphysics-on-unity-pure-ecs%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n","protected":false},"excerpt":{"rendered":"<p>If you don\u00b4t know, there is no implementation of a physics collision treatment if you are implementing pure ECS at<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[5,7],"_links":{"self":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/86"}],"collection":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/comments?post=86"}],"version-history":[{"count":4,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/86\/revisions"}],"predecessor-version":[{"id":91,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/86\/revisions\/91"}],"wp:attachment":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media?parent=86"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/categories?post=86"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/tags?post=86"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}},{"id":56,"date":"2018-08-26T15:45:20","date_gmt":"2018-08-26T15:45:20","guid":{"rendered":"http:\/\/ploobs.com.br\/?p=56"},"modified":"2018-08-26T21:57:43","modified_gmt":"2018-08-26T21:57:43","slug":"first-steps-on-creating-a-pure-ecs-unity-project-part-2","status":"publish","type":"post","link":"http:\/\/ploobs.com.br\/2018\/08\/26\/first-steps-on-creating-a-pure-ecs-unity-project-part-2\/","title":{"rendered":"First Configurations ECS Unity Project"},"content":{"rendered":"\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F26%2Ffirst-steps-on-creating-a-pure-ecs-unity-project-part-2%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n<p>In this part of the tutorial i will describe what i had to configure in the project and what a created to have some components working in a simple system<\/p>\n\n<h2>First things first<\/h2>\n\n<p>The first thing you need to do it is, install the Entities Package in your project<\/p>\n\n<p>Go to the menu Window->Package Manager<br\/>Search in the All tab and check if it has already been installed, othewise do that<\/p>\n\n<figure class=\"wp-block-image\"><img src=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/PACKAGE_MANAGER.png\" alt=\"\" class=\"wp-image-59\" srcset=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/PACKAGE_MANAGER.png 868w, http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/PACKAGE_MANAGER-300x153.png 300w, http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/PACKAGE_MANAGER-768x392.png 768w\" sizes=\"(max-width: 868px) 100vw, 868px\" \/><\/figure>\n\n<p>Now make sure that the Scripting Runtime Version is .NET 4.x as described in the previous part of the tutorial<\/p>\n\n<figure class=\"wp-block-image\"><img src=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/configure.png\" alt=\"\" class=\"wp-image-54\" srcset=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/configure.png 353w, http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/configure-300x128.png 300w\" sizes=\"(max-width: 353px) 100vw, 353px\" \/><\/figure>\n\n<h2>Creating Render Prototypes<\/h2>\n\n<p>As i cited in the previeous tutorial, i decided to create all the entities programaticaly, but thinking in a solution that i can easily try another models and materials, i chosed to use a gameobject to enable us to edit the Mesh Instance Renderer Component<\/p>\n\n<figure class=\"wp-block-image\"><img src=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/renderprototype.png\" alt=\"\" class=\"wp-image-61\" srcset=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/renderprototype.png 382w, http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/renderprototype-300x263.png 300w\" sizes=\"(max-width: 382px) 100vw, 382px\" \/><\/figure>\n\n<p>As for the Mesh, you have to chose the inner object of your model, a mesh<\/p>\n\n<figure class=\"wp-block-image\"><img src=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/Sappling_model.png\" alt=\"\" class=\"wp-image-65\"\/><\/figure>\n\n<p>As for the material, you must create a Material and an important thing that have to be changed it is enable gpu instancing<\/p>\n\n<figure class=\"wp-block-image\"><img src=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/ECS_Material.png\" alt=\"\" class=\"wp-image-66\" srcset=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/ECS_Material.png 303w, http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/ECS_Material-300x131.png 300w\" sizes=\"(max-width: 303px) 100vw, 303px\" \/><\/figure>\n\n<p>\u00a0<\/p>\n\n<h2>Decoupling with Factories<\/h2>\n\n<p>I decided to create Factories of archetypes and entities to decouple of the bootstrap creation.<br\/><br\/><\/p>\n\n<p>The Archetype Factory is basicaly a simple Dictionary of archetypes by archetypeName<\/p>\n\n<p>The Entity Factory is a Delegate Dictionary by entityName<\/p>\n\n<p>Creation<\/p>\n\n<pre class=\"wp-block-code\"><code>private delegate Entity Delegate1();\n\nprivate Dictionary&lt;string, Delegate1> entities = new Dictionary&lt;string, Delegate1>();<\/code><\/pre>\n\n<p>One of the methods<\/p>\n\n<pre class=\"wp-block-code\"><code>    private Entity CreatePlayer()\n    {\n        this._entityManager = World.Active.GetExistingManager&lt;EntityManager>();\n\n        var playerEntity = this._entityManager.CreateEntity(ArchetypeFactory.Instance.getArchetypeByName(\"player\"));\n        this._entityManager.SetSharedComponentData(playerEntity, GetLookFromPrototype(\"PlayerRenderPrototype\"));\n\n        return playerEntity;\n    }<\/code><\/pre>\n\n<p>Method used to retrieve information from render prototypes<\/p>\n\n<pre class=\"wp-block-code\"><code>private static MeshInstanceRenderer GetLookFromPrototype(string protoName)\n    {\n        var proto = GameObject.Find(protoName);\n        var result = proto.GetComponent&lt;MeshInstanceRendererComponent>().Value;\n        Object.Destroy(proto);\n        return result;\n    }<\/code><\/pre>\n\n<p>Interface method used by bootstrap<\/p>\n\n<pre class=\"wp-block-code\"><code>    public Entity createEntityByName(string entityName)\n    {\n        return (Entity)entities[entityName].DynamicInvoke(null);\n    }<\/code><\/pre>\n\n<h2>Next Steps<\/h2>\n\n<p>In the next tutorial i will discuss about how will i solve the fact that pure ecs does not deal with physics automaticaly yet<\/p>\n\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F26%2Ffirst-steps-on-creating-a-pure-ecs-unity-project-part-2%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n","protected":false},"excerpt":{"rendered":"<p>In this part of the tutorial i will describe what i had to configure in the project and what a<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[5,7],"_links":{"self":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/56"}],"collection":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/comments?post=56"}],"version-history":[{"count":22,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/56\/revisions"}],"predecessor-version":[{"id":85,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/56\/revisions\/85"}],"wp:attachment":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media?parent=56"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/categories?post=56"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/tags?post=56"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}},{"id":33,"date":"2018-08-24T15:00:46","date_gmt":"2018-08-24T15:00:46","guid":{"rendered":"http:\/\/ploobs.com.br\/?p=33"},"modified":"2018-08-26T21:56:38","modified_gmt":"2018-08-26T21:56:38","slug":"first-steps-on-creating-a-pure-ecs-unity-project-part-1","status":"publish","type":"post","link":"http:\/\/ploobs.com.br\/2018\/08\/24\/first-steps-on-creating-a-pure-ecs-unity-project-part-1\/","title":{"rendered":"First Steps on creating a pure ECS Unity Project"},"content":{"rendered":"\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F24%2Ffirst-steps-on-creating-a-pure-ecs-unity-project-part-1%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n<p>This the very first step of creating your game in unity using pure ECS. I will describe here how i did it and some things i discovered during it<\/p>\n\n<p>This tutorial contains basic concepts and decisions i made.<\/p>\n\n<h2>Project Configuration<\/h2>\n\n<p>The first thing you must check it is the .NET version in the Scripting Runtime Version, that can be found at the menu Edit -> Project Settings -> Player<\/p>\n\n<figure class=\"wp-block-image\"><img src=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/configure.png\" alt=\"\" class=\"wp-image-54\" srcset=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/configure.png 353w, http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/configure-300x128.png 300w\" sizes=\"(max-width: 353px) 100vw, 353px\" \/><\/figure>\n\n<p>A grand difference between classic projects and pure ecs projects as the moment i wrote this post it is that the editor it is not that ready yet. But what this means, it is not that clear how to configure the gameobjects and add ECS components as the ECS architecture needs.<\/p>\n\n<p><strong>Object Configuration<\/strong><\/p>\n\n<p>A project configuration nowaday since we will not configure the game objects directly in the editor needs to be done directly in the code<\/p>\n\n<p>For things like asset references, we need to create a prototype GameObjects in the Scene, where we can add wrapped\u00a0<strong>IComponentData<\/strong>\u00a0types. Once we&#8217;ve finished the configuration, we can discard these prototype objects.<\/p>\n\n<p>In the minigame plantjumper i will not use this approach since the level and player will be created procedurally.<\/p>\n\n<p><strong>Archetypes<\/strong><\/p>\n\n<p>As an ECS object, we must configure entities and components. In Unity we have a very interresting feature, archetypes, which is, as we are used in unity something like a prefab of a group of components.<\/p>\n\n<pre class=\"wp-block-code\"><code>PlayerArchetype = entityManager.CreateArchetype(\ntypeof(Position3D), \ntypeof(PlayerInput), \ntypeof(Health), \ntypeof(TransformMatrix));<\/code><\/pre>\n\n<p>The sample above creates an archetype with pre created components<\/p>\n\n<pre class=\"wp-block-code\"><code>    public struct Health : IComponentData\n    {\n        public float Value;\n    }<\/code><\/pre>\n\n<p>Some of the components are unity defaults, and then we don\u00b4t need to create then. In the example i gave here, the Position3D and TransformMatrix.<\/p>\n\n<p>As you can notice the Health component i described it is a struct and not a class and this is not in vain. This is due to the fact that instances are passed as references and structs as value and then this is a good way to optimize memory because we will not handle unnecessary data.<\/p>\n\n<p>I decided to create a bunch of component files because i want to reuse then in another games and a Factory of archetypes to create a level of abstractions.<\/p>\n\n<h2>Bootstrap<\/h2>\n\n<p>As the object creation lifecycle, i will overload the unity initialization, that can tipicaly be configured as a script attached to a gameobject.<\/p>\n\n<p>The bootstrap script it is responsible to create the entities, associate its components and if necessary initialize some systems<\/p>\n\n<h2>References<\/h2>\n\n<figure class=\"wp-block-embed-youtube wp-block-embed is-type-video is-provider-youtube\">\n<iframe width=\"910\" height=\"512\" src=\"https:\/\/www.youtube.com\/embed\/EYnTX66QPRg?feature=oembed\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen><\/iframe>\n<\/figure>\n\n<p><a href=\"https:\/\/github.com\/Unity-Technologies\/EntityComponentSystemSamples\/blob\/master\/Documentation\/content\/two_stick_shooter.md\">Two Stick Shooter ECS<\/a><\/p>\n\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F24%2Ffirst-steps-on-creating-a-pure-ecs-unity-project-part-1%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n","protected":false},"excerpt":{"rendered":"<p>This the very first step of creating your game in unity using pure ECS. I will describe here how i<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[5,7],"_links":{"self":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/33"}],"collection":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/comments?post=33"}],"version-history":[{"count":10,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/33\/revisions"}],"predecessor-version":[{"id":83,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/33\/revisions\/83"}],"wp:attachment":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media?parent=33"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/categories?post=33"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/tags?post=33"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}},{"id":39,"date":"2018-08-22T19:00:22","date_gmt":"2018-08-22T19:00:22","guid":{"rendered":"http:\/\/ploobs.com.br\/?p=39"},"modified":"2018-09-10T20:33:35","modified_gmt":"2018-09-10T20:33:35","slug":"plant-jumper","status":"publish","type":"post","link":"http:\/\/ploobs.com.br\/2018\/08\/22\/plant-jumper\/","title":{"rendered":"Plant Jumper"},"content":{"rendered":"\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F22%2Fplant-jumper%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n<figure class=\"wp-block-image\"><img src=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/Plant-Jumper.png\" alt=\"\" class=\"wp-image-38\" srcset=\"http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/Plant-Jumper.png 220w, http:\/\/ploobs.com.br\/wp-content\/uploads\/2018\/08\/Plant-Jumper-169x300.png 169w\" sizes=\"(max-width: 220px) 100vw, 220px\" \/><\/figure>\n\n<p>As the first minigame, i will build a simple jumper game.<\/p>\n\n<h2>Features<\/h2>\n\n<ul><li>Simple Blocks<\/li><li>Water going up to catch the player<\/li><li>Player that jumps<\/li><li>Simple Controllers by clicking in the left or right of the screen<\/li><li>Simple procedural level generation<\/li><li>Using Pure ECS<\/li><\/ul>\n\n<p>Throughout the development I will post short posts describing how this will be done.<\/p>\n\n<h2>Entities, Components and Systems first idea<\/h2>\n\n<p>My first guess of Entities, Components and Systems are the list below, but probably while implementing i will notice another needs<\/p>\n\n<p><em><strong>Entities<\/strong><\/em><\/p>\n\n<ul><li>Player<\/li><li>Block<\/li><li>Water<\/li><\/ul>\n\n<p><em><strong>Components<\/strong><\/em><\/p>\n\n<ul><li>Position<\/li><li>Player (tags)<\/li><li>Block(tag)<\/li><li>Collision<\/li><li>PlayerInput<\/li><li>ParticleDispatcher<\/li><li>Jump<\/li><li>AutomaticAction<\/li><\/ul>\n\n<p><em><strong>Systems<\/strong><\/em><\/p>\n\n<ul><li>PlayerInputSystem<\/li><li>PlayerHitSystem<\/li><li>AutomaticJumpSystem<\/li><\/ul>\n\n<h2>Considerations<\/h2>\n\n<p>Decide the considerations on the granularity of components and systems will be a good challenge that we are going to face together<\/p>\n\n<p><em><strong><\/strong><\/em><\/p>\n\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F22%2Fplant-jumper%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n","protected":false},"excerpt":{"rendered":"<p>As the first minigame, i will build a simple jumper game. Features Simple BlocksWater going up to catch the playerPlayer<\/p>\n","protected":false},"author":1,"featured_media":38,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[4,3],"tags":[5,7],"_links":{"self":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/39"}],"collection":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/comments?post=39"}],"version-history":[{"count":4,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/39\/revisions"}],"predecessor-version":[{"id":45,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/39\/revisions\/45"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media\/38"}],"wp:attachment":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media?parent=39"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/categories?post=39"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/tags?post=39"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}},{"id":12,"date":"2018-08-22T16:12:29","date_gmt":"2018-08-22T16:12:29","guid":{"rendered":"http:\/\/ploobs.com.br\/?p=12"},"modified":"2018-08-22T16:12:29","modified_gmt":"2018-08-22T16:12:29","slug":"why-i-decided-to-use-ecs","status":"publish","type":"post","link":"http:\/\/ploobs.com.br\/2018\/08\/22\/why-i-decided-to-use-ecs\/","title":{"rendered":"Why i decided to use ECS"},"content":{"rendered":"\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F22%2Fwhy-i-decided-to-use-ecs%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n<p><strong>Here i will not describe what it is a ECS because there is a lot of references for that. You can learn about a little reading the references i gave here in the reference section. This is a short description on some characteristics i considered to choose to use it.<\/strong><\/p>\n\n<p>It is common cense among programmers that a code must be clean, concise an if possible modular. In my case reuse it is a very important issue.<\/p>\n\n<p>I decided to create a great game and therefore to create prototypes as a progression strategy, testing features. A strategy decision i made was to create minigames, using behaviors or features that will be part of the final one. <\/p>\n\n<p>A main characteristic for that it is that i want to use the same code used in the prototype, in the main game.<\/p>\n\n<p>Looking for the current effort that Unity it is adding to develop and change its engine core itself it is a good reason to decide using it<\/p>\n\n<p><strong>Performance<\/strong><\/p>\n\n<p>I confess that at the moment i am not so concerned about performance, because i still has no problems, and the main rule in the search of a performatic code it is <em><strong>do not\u00a0nitpicking. <\/strong><\/em>But on the other hand i want my game to be executed in a mobile and create a great experience to the user, so the smooth it runs the better.<\/p>\n\n<p>While running the main loop of a game, the software fights a battle of time. Each piece of the main loop has it own frame time concurring in the CPU and GPU. You can reduce the complexity of a algorithm but a big CPU and GPU villain is the amount of memory in the data bus and therefore the size of buffers used to perform some computation.<\/p>\n\n<p>Another issue, in the convencional architectures it is the miss use of the computational power of the CPUs and GPUs, and this is due to the bad use of multi cores. Almost all the time, we are using only one core<\/p>\n\n<p>This two big issues, ECS can naturaly solved.<\/p>\n\n<p><strong>Another mindset<\/strong><\/p>\n\n<p>Creating a software nowaday starts by thinking about how to share functions and share data, so we don\u00b4t need to duplicate code and then can create bug sources or make the maintenance of the code harder.<\/p>\n\n<p>While thinking in ECS, we have to break the feature down in atomic characteristics, that will be the components, we should not create classes containing all the functions and data needed to describe an instance.<\/p>\n\n<p>I think that this mindset change will require a different kind of documentation, because we programmers are used to read OOP classes and think about code, this way.<\/p>\n\n<p><strong>Combine Behaviors easily<\/strong><\/p>\n\n<p>The main idea of my game lies upon characters with different behaviors, in an environment with different behaviors also. So to me seams to be that this concepts are very tigh together and once more, it is a very good hint that i moght try it<\/p>\n\n<p>Well, as i said at the beggining, this is a descriptions of my reasons, in the following posts i will describe my tragetory using UNITY PURE ECS.<\/p>\n\n<h1><strong>References<\/strong><\/h1>\n<p><strong><span style=\"color: #ff0000;\">Definitions<\/span><\/strong><\/p>\n<p><em>ECS Concepts<\/em><\/p>\n<p><a href=\"https:\/\/katatunix.wordpress.com\/2016\/01\/26\/oop-vs-ecs\/\" target=\"_blank\" rel=\"nofollow noopener\">https:\/\/katatunix.wordpress.com\/2016\/01\/26\/oop-vs-ecs\/<\/a><\/p>\n<p><a href=\"http:\/\/www.richardlord.net\/blog\/ecs\/what-is-an-entity-framework.html\" target=\"_blank\" rel=\"nofollow noopener\">http:\/\/www.richardlord.net\/blog\/ecs\/what-is-an-entity-framework.html<\/a><\/p>\n<p><em>Unity ECS Concepts<\/em><\/p>\n<p><a href=\"https:\/\/github.com\/Unity-Technologies\/EntityComponentSystemSamples\/blob\/master\/Documentation\/index.md\">https:\/\/github.com\/Unity-Technologies\/EntityComponentSystemSamples\/blob\/master\/Documentation\/index.md<\/a><\/p>\n<p><a href=\"https:\/\/github.com\/Unity-Technologies\/EntityComponentSystemSamples\/blob\/master\/Documentation\/content\/ecs_concepts.md\">https:\/\/github.com\/Unity-Technologies\/EntityComponentSystemSamples\/blob\/master\/Documentation\/content\/ecs_concepts.md<\/a><\/p>\n<hr \/>\n<p><strong><span style=\"color: #ff0000;\">Discussion about ECS over MVC<\/span><\/strong><br \/><a href=\"http:\/\/www.richardlord.net\/presentations\/game-architecture-is-different.html\" target=\"_blank\" rel=\"nofollow noopener\">http:\/\/www.richardlord.net\/presentations\/game-architecture-is-different.html<\/a><\/p>\n<!-- Facebook Like Button v1.9.6 BEGIN [http:\/\/blog.bottomlessinc.com] -->\n<iframe src=\"http:\/\/www.facebook.com\/plugins\/like.php?href=http%3A%2F%2Fploobs.com.br%2F2018%2F08%2F22%2Fwhy-i-decided-to-use-ecs%2F&amp;layout=standard&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" style=\"border:none; overflow:hidden; width:450px; height: 30px; align: left; margin: 2px 0px 2px 0px\"><\/iframe>\n<!-- Facebook Like Button END -->\n","protected":false},"excerpt":{"rendered":"<p>Here i will not describe what it is a ECS because there is a lot of references for that. You<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[6,5],"_links":{"self":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/12"}],"collection":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/comments?post=12"}],"version-history":[{"count":6,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/12\/revisions"}],"predecessor-version":[{"id":36,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/posts\/12\/revisions\/36"}],"wp:attachment":[{"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/media?parent=12"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/categories?post=12"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/ploobs.com.br\/wp-json\/wp\/v2\/tags?post=12"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}]